---
title:  "[파이썬] 기본 통계 확인하기-분석용 데이터 탐색(2)"
date: 2020-03-30
categories: ['python']
tags: ['python', '파이썬']
---
## 1. DataFrame의 데이터 조회하기

### 1) 기초 통계값 확인

- 데이터 분석은 우선 기초 통계값을 확인하여 통계 분석의 방향을 결정해야 한다.

![프로세스](/assets/Images/python/chapter34/1_process.JPG)

### 2) 데이터 전체 크기 확인하기

- 데이터프레임의 행과 열의 수를 튜플로 표시한다.

```python
dataFrame객체.shape
```

### 3) 데이터 형태 확인

- 데이터프레임의 상위 n건을 담은 새로운 데이터프레임을 리턴한다.

- 파라미터를 생략할 경우 상위 5건을 리턴한다.

```python
dataFrame객체.head(n)
```

- 데이터프레임의 하위 n건을 담은 새로운 데이터 프레임을 리턴한다.

- 파라미터를 생략할 경우 하위 5건을 리턴한다.

```python
dataFrame객체.tail(n)
```

### 4) 집단의 특성을 나타내는 요약 통계량 확인하기

- 요약 통계량을 담은 새로운 데이터프레임을 생성하여 반환한다.

```python
dataFrame객체.describe()
```

|출력값| 통계량 | 설명|
|:--:|:--|:--|
|count  |데이터 수  | 유효한 데이터의 수 (빈값(NaN)은 제외하고 카운트)|
|mean   |평균(Mean) |모든 요소의 값을 더하고 요소의 개수로 나눈 값|
|std    |표준편차   |데이터 집합의 확산 정도를 나타내는 분산의 단위를 본래의 척도와 맞춰주기 위해 분산을 제곱근 한 것|
|min    |최소값 | 가장 작은 값|
|25%    | 1사분위수 | 하위 25%(4분의 1) 지점에 위치하는 값|
|50%    |중앙값 혹은 2사분위수| 중앙에 위치하는 값|
|75%    | 3사분위수 | 하위 75%(4분의 3) 지멍에 위치하는 값|
|max    |최대값     | 가장 큰 값|


<br>

## 2. 기초 통계 기법

### 1) 평균값과 중앙 값의 차이

평균값 : 모든 요소의 값을 더한 후 모든 요소의 개수로 나눈 값

    예시 - {1,2,3,4,5,6,7,8,9,10} -> 55/10 = 5.5

중앙값

    - 요소의 개수가 홀수인 경우 : 모든 값을 순서대로 정렬한 후 가운데 위치한 값

    # 예시 : {1,2,3,4,5} -> 중앙값 = 3


    - 요소의 개수가 짝수인 경우 : 모든 값을 순서대로 정렬한 후 가운데 위치한 두 값의 평균

    # 예시 : {1,2,3,4,5,6} -> 중앙값 = (3+4)/2 = 3.5

### 2) DataFrame 객체에서 요약 통계량의 집계 함수

|Panda 함수| 통계량|
|:--:|:--:|
|`count()`    |  데이터 수 |
|`mean()`       | 평균 |
|`sum()`      | 데이터 합계 |
|`std()`      | 표준편차 |
|`min()`      |  `최소값(Minimum)`|
|`max()`      | `최대값(Maximum)`|
|`median()` 혹은 `quantile(q=0.5)`|`중앙값(Median)`|
|`quantile(q=0.25)`   |`1사 분위수 (1st Quantile)`|
|`qunatile(q=0.75)`   |`3사 분위수 (3rd Quantile)`|

<br>

#### 예제코드

##### 샘플데이터 작성 (`sample.py`)

```python
#-----------------------------------------------------
# 데이터 프레임에서 사용할 샘플 데이터
#-----------------------------------------------------
# 어느 학급의 성적표를 표현한 2차원 리스트
grade_list = [  # 국  영  수  과
                 [98,  None, 88,   64],   # 철수
                 [88,  90,   62,   72],   # 영희
                 [92,  70,   None, None], # 민철
                 [63,  60,   31,   70],   # 수현
                 [120, 50,   None, 88]    # 호영
            ]

# 어느 학급의 성적표를 표현한 딕셔너리
grade_dic = {
    '국어': [98, 88, 92, 63, 120],
    '영어': [None, 90, 70, 60, 50],
    '수학': [88, 62, None, 31, None],
    '과학': [64, 72, None, 70, 88]
}

# 서울, 부산, 인천의 5년 단위 인구 분포
city_people = {
    "도시": ["서울", "서울", "서울", "부산", "부산", "부산", "인천", "인천"],
    "연도": ["2015", "2010", "2005", "2015", "2010", "2005", "2015", "2010"],
    "인구": [9904312, 9631482, 9762546, 3448737, 3393191, 3512547, 2890451, 2632035],
    "지역": ["수도권", "수도권", "수도권", "경상권", "경상권", "경상권", "수도권", "수도권"]
}

# 2017년 교통사고 조사
traffic = {
    'seoul'  : [ 3166, 2728, 3098, 3172, 3284, 3247, 3268, 3308, 3488, 3312, 3375, 3179 ],
    'busan'  : [ 927, 857, 988, 955, 1014, 974, 1029, 1040, 1058, 971, 958, 982 ],
    'daegu'  : [ 933, 982, 1049, 1032, 1083, 1117, 1076, 1080, 1174, 1163, 1146, 1135 ],
    'inchun' : [ 655, 586, 629, 669, 643, 627, 681, 657, 662, 606, 641, 663 ],
    'month'  : ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월']
}

# 어느 학교에서 임의로 선정한 학생들의 신장(cm단위)에 대한 자료
height = {
    '키': [170, 178, 171, 168, 173, 178, 171, 174, 170, 170,
           175, 170, 169, 166, 162, 170, 171, 175, 175, 171,
           170, 172, 179, 164, 170, 181, 178, 180, 177, 166,
           169, 168, 165, 163, 175, 166, 178, 165, 168, 167,
           177, 168, 177, 174, 174, 176, 169, 173, 167, 170,
           173, 170, 162, 182, 171]
}
```
<br>

##### 구현코드 1

```python
# 모듈 참조
from pandas import DataFrame
from sample import grade_dic

df = DataFrame(grade_dic, index=['철수', '영희', '민철', '수현', '호영'])

# 행과 열의 개수를 튜플로 반환
print(df.shape)
print('-'*30)

# 전체에 대한 처음 2줄만 추출 (파라미터가 없을 경우 5줄이 기본)
top = df.head(2)
print(top)
print('-'*30)

# 특정 열에 대한 처음 2줄
print(df['영어'].head(2))
```

```
(5, 4)
------------------------------
    국어    영어    수학    과학
철수  98   NaN  88.0  64.0
영희  88  90.0  62.0  72.0
------------------------------
철수     NaN
영희    90.0
Name: 영어, dtype: float64
```

##### 구현코드 2 (1 번에 이어서) 

```python
#마지막 2줄만 보기 -> 파라미터가 없을 경우 5줄이 기본
button = df.tail(2)
print(button)
print('-'*30)

# 특정 열에 대한 마지막 2줄
print(df['영어'].tail(2))
print('-'*30)

# 전체 요약정보 가져오기
des = df.describe()

# 요약 정보의 타입은 DataFrame
print(type(des))

# 요약 정보 출력하기
print(des)
```

```
     국어    영어    수학    과학
수현   63  60.0  31.0  70.0
호영  120  50.0   NaN  88.0
------------------------------
수현    60.0
호영    50.0
Name: 영어, dtype: float64
------------------------------
<class 'pandas.core.frame.DataFrame'>
               국어         영어         수학         과학
count    5.000000   4.000000   3.000000   4.000000
mean    92.200000  67.500000  60.333333  73.500000
std     20.474374  17.078251  28.536526  10.246951
min     63.000000  50.000000  31.000000  64.000000
25%     88.000000  57.500000  46.500000  68.500000
50%     92.000000  65.000000  62.000000  71.000000
75%     98.000000  75.000000  75.000000  76.000000
max    120.000000  90.000000  88.000000  88.000000
```

##### 구현코드 3 (2 번에 이어서)

```python
# 특정 열에 대한 요약 정보 보기
print(df['영어'].describe())
print('-'*30)

# 요약정보의 개별 조회
# 각 열, 혹은 특정 열에 대해 NA를 제외한 값의 수를 반환
print(df.count())
print('-'*30)
print(df['영어'].count())
print('-'*30)

# 최소값
print(df.min())
print('-'*30)
print(df['영어'].min())
print('-'*30)

# 최대값
print(df.max())
print('-'*30)
print(df['영어'].max())
print('-'*30)

# 합계
print(df.sum())
print('-'*30)
print(df['영어'].sum())
print('-'*30)

# 평균
print(df.mean())
print('-'*30)
print(df['영어'].mean())
print('-'*30)

```

```
count     4.000000
mean     67.500000
std      17.078251
min      50.000000
25%      57.500000
50%      65.000000
75%      75.000000
max      90.000000
Name: 영어, dtype: float64
------------------------------
국어    5
영어    4
수학    3
과학    4
dtype: int64
------------------------------
4
------------------------------
국어    63.0
영어    50.0
수학    31.0
과학    64.0
dtype: float64
------------------------------
50.0
------------------------------
국어    120.0
영어     90.0
수학     88.0
과학     88.0
dtype: float64
------------------------------
90.0
------------------------------
국어    461.0
영어    270.0
수학    181.0
과학    294.0
dtype: float64
------------------------------
270.0
------------------------------
국어    92.200000
영어    67.500000
수학    60.333333
과학    73.500000
dtype: float64
------------------------------
67.5
------------------------------
```

##### 구현코드 4 (3 번에 이어서)

```python
# 중앙값(2사분위수)
print(df.median())
print('-'*30)
print(df['영어'].median())
print('-'*30)

# 사분위수 (중앙값: 50% 위치의 값)
print(df.quantile(q=0.5))
print('-'*30)
print(df['영어'].quantile(q=0.5))
print('-'*30)

# 1사분위 수 (25 % 위치의 값)
print(df.quantile(q=0.25))
print('-'*30)

# 3사분위 수 (75 % 위치의 값)
print(df.quantile(q=0.75))
print('-'*30)

# 사분위 수 이외의 위치 추출
# 90 % 위치의 값 = 상위 10 %
print(df.quantile(q=0.9))
```

```
국어    92.0
영어    65.0
수학    62.0
과학    71.0
dtype: float64
------------------------------
65.0
------------------------------
국어    92.0
영어    65.0
수학    62.0
과학    71.0
Name: 0.5, dtype: float64
------------------------------
65.0
------------------------------
국어    88.0
영어    57.5
수학    46.5
과학    68.5
Name: 0.25, dtype: float64
------------------------------
국어    98.0
영어    75.0
수학    75.0
과학    76.0
Name: 0.75, dtype: float64
------------------------------
국어    111.2
영어     84.0
수학     82.8
과학     83.2
Name: 0.9, dtype: float64
```
<br>

## 3. 상자그림

### 1) 기초 통계 값을 표현하는 그래프

![상자그림1](/assets/Images/python/chapter34/2_box.JPG)

<br>

##### 예제코드 (위 `sample.py` 데이터 사용)

##### 구현코드 1

```python
#모듈 참조
from pandas import DataFrame
from matplotlib import pyplot
from sample import grade_dic

df = DataFrame(grade_dic, index=['철수', '영희', '민철', '수현', '호영'])

# 한글 폰트 , 그래픽 크기 설정
pyplot.rcParams['font.family'] = 'NanumGothic'
pyplot.rcParams['font.size'] = 14
pyplot.rcParams['figure.figsize'] = (12, 8)

# 국어 점수에 대한 상자그림 보기
pyplot.figure()
df.boxplot('국어')
pyplot.savefig('boxplot1.png', dpi =300)
pyplot.close()
```
![상자그림2](/assets/Images/python/chapter34/3_box2.JPG)
<br>

##### 구현코드 2 (1 번에 이어서)

```python
# 전체 점수에 대한 상자그림 보기
pyplot.figure()
df.boxplot()
pyplot.savefig('boxplot2.png', dpi =300)
pyplot.close()
```

![상자그림3](/assets/Images/python/chapter34/4_box3.JPG)
<br>

### 2) 히스토그램

- 도수 분포표의 하나. 가로축에 계급을, 세로축에 도수를 취하고, 도수 분포의 상태를 직사각형의 기둥 모양으로 나타낸 그래프

#### 히스토그램 작성 과정

1. 자료의 개수와 구간을 확인한다.

2. 자료를 몇 개의 구간으로 나눌지 결정한다.

3. pyplot의 hist()함수를 사용하여 히스토그램을 만든다.

```python
n, bins, patches = pyplot.hist(값, 구간)
```

##### 예제코드

```python
# 모듈 참조
from pandas import DataFrame
from matplotlib import pyplot
from sample import height

# 데이터 입력
df = DataFrame(height)

# 자료의 개수를 셈
print('자료의 수: %d개' % df['키'].count())

# 자료 내에서 최대/최소 값을 구한다.
max_value = df['키'].max()
min_value = df['키'].min()
print('최대값: %d' %max_value)
print('최소값: %d' %min_value)
print('-'*30)

# 몇 개 구간으로 나눌지 설정
step = 5

# 한글폰트, 그래픽 크기 설정
pyplot.rcParams['font.family'] = 'NanumGothic'
pyplot.rcParams['font.size'] = 14
pyplot.rcParams['figure.figsize'] = (12, 8)

# 그래프 작성 시작
pyplot.figure()

# 데이터와 구간을 사용하여 히스토그램 작성
# 파라미터는 리스트, Numpy배열, 시리즈, 데이터프레임의 컬럼등
n, bins, patches = pyplot.hist(df['키'], bins=step)

# 그래프 설정
pyplot.grid()
pyplot.xlabel('키 구간')
pyplot.ylabel('구간별 데이터 수')
pyplot.show()
pyplot.close()

# 각 구간에 포함된 값의 개수 혹은 빈도 리스트
print(n)
print('-'*30)

# 각 구간별 경계값 리스트
print(bins)
print('-'*30)

# 각 구간을 그리는 matplot 객체 리스트
print(patches)
```

```
자료의 수: 55개
최대값: 182
최소값: 162
------------------------------
[ 6. 12. 18. 11.  8.]
------------------------------
[162. 166. 170. 174. 178. 182.]
------------------------------
<a list of 5 Patch objects>
```

![히스토그램](/assets/Images/python/chapter34/5_box4.JPG)


참조 : 호쌤의 교육자료, (<https://blog.itpaper.co.kr/>)